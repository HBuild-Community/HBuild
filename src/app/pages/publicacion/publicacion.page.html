<ion-header>
    <ion-toolbar>
        <ion-buttons slot="end" (click)="salirSinArgumentos()">
            <ion-icon name="close-outline" slot="icon-only"></ion-icon>
        </ion-buttons>
        <ion-title>Publicación</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
    <div class="content">
        <ion-item lines="none">
            <ion-avatar slot="start" style="width: 50px; height: 50px;">
                <img src={{publicacion.value.imagen}}>
            </ion-avatar>
            <ion-label>
                <p id="name">{{publicacion.value.nombre}} {{publicacion.value.apellidos}}</p>
                <p>{{publicacion.key.data.fecha.toDate() | date:'dd/MM/yyyy'}} {{publicacion.value.locacion}}</p>
            </ion-label>
            <!-- <ion-buttons slot="end">
        <ion-button (click)="mostrarPop( $event )">
          <ion-icon class="elipsis" slot="icon-only" ios="ellipsis-vertical" md="ellipsis-vertical">
          </ion-icon>
        </ion-button>
      </ion-buttons> -->
        </ion-item>
        <p class="ion-margin ion-text-wrap descripcion">{{publicacion.key.data.descripcion}}</p>
        <div class="img-description">
            <p class="p-description">{{publicacion.key.data.titulo}}</p>
            <ion-img src={{publicacion.key.data.urlImagen}}>
            </ion-img>
        </div>
        <ion-grid class="ion-padding-vertical ion-margin-horizontal">
            <ion-row class="ion-justify-content-end">
                <ion-col class="ion-no-padding" size="2">
                    <ion-label class="col-height ion-no-margin">
                        <ion-icon class="show" name="heart-outline"></ion-icon>
                        <span class="number"> 9</span>
                    </ion-label>
                </ion-col>
            </ion-row>
        </ion-grid>
    </div>

    <ion-list>

        <!--  -->
        <ion-grid class="ion-padding-horizontal" *ngFor="let comentario of mapComentarios | keyvalue">
            <div *ngIf="mapComentarios.keys.length != 0">
                <p>No hay comentarios en esta publicación, sé el primero</p>
            </div>
            <ion-row *ngIf="mapComentarios.keys.length == 0" class="ion-margin-top">
                <ion-col size="2">
                    <ion-avatar style="width: 50px; height: 50px;">
                        <img src={{comentario.value.imagen}}>
                    </ion-avatar>
                </ion-col>
                <ion-col size="10">
                    <div class="ion-margin-start">
                        <ion-label>
                            <p id="name">{{comentario.value.nombre}} {{comentario.value.apellidos}}</p>
                            <p class="ion-margin-top">{{comentario.key.data.comentario}}</p>
                        </ion-label>
                    </div>
                </ion-col>
            </ion-row>
        </ion-grid>
    </ion-list>

</ion-content>

<ion-footer translucent="true">
    <ion-grid>
        <ion-row class="ion-align-items-center">
            <ion-col size="10">
                <ion-textarea [(ngModel)]="inputComentario" enterkeyhint="done" rows="1" class="comentar" placeholder="Escribe un comentario"></ion-textarea>
            </ion-col>
            <ion-col size="2" class="ion-align-items-center">
                <ion-button (click)="insertComentario(publicacion.key.uid)">
                    <ion-icon name="checkmark-circle"></ion-icon>
                </ion-button>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-footer>